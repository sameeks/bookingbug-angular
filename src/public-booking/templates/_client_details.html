<div
  ng-form
  name="client_details_form"
  class="form-horizontal"
  role="form"
  bb-form
  novalidate>

  <div
    class="form-group"
    ng-class="{
      'has-error':
        client_details_form.first_name.$invalid &&
        (client_details_form.first_name.$dirty || client_details_form.submitted)
    }">
    <label
      for="first_name"
      class="control-label col-sm-4"
      translate="PUBLIC_BOOKING.CLIENT_FORM.FIRST_NAME_LBL">
    </label>
    <div class="col-sm-5">
      <input
        type="text"
        name="first_name"
        id="first_name"
        required
        ng-model="client.first_name"
        class="form-control"
        autofocus
        ng-pattern="validator.alpha"
        autocomplete="given-name"
      />
    </div>
    <div class="col-sm-3">
      <div ng-messages="client_details_form.first_name.$error" role="alert">
        <div ng-show="client_details_form.first_name.$dirty || client_details_form.submitted">
          <div ng-message="required" class="error-message">
            <span
              class="error-message__item"
              translate="PUBLIC_BOOKING.CLIENT_FORM.FIRST_NAME_REQUIRED">
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div
    class="form-group"
    ng-class="{
      'has-error':
        client_details_form.last_name.$invalid &&
        (client_details_form.last_name.$dirty || client_details_form.submitted)
    }">
    <label
      class="control-label col-sm-4"
      for="last_name"
      translate="PUBLIC_BOOKING.CLIENT_FORM.LAST_NAME_LBL">
    </label>
    <div class="col-sm-5">
      <input
        type="text"
        name="last_name"
        id="last_name"
        required
        ng-model="client.last_name"
        class="form-control"
        ng-pattern="validator.alpha"
        autocomplete="family-name"
      />
    </div>
    <div class="col-sm-3">
      <div ng-messages="client_details_form.last_name.$error" role="alert">
        <div ng-show="client_details_form.last_name.$dirty || client_details_form.submitted">
          <div ng-message="required" class="error-message">
            <span
              class="error-message__item"
              translate="PUBLIC_BOOKING.CLIENT_FORM.LAST_NAME_REQUIRED">
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div
    class="form-group"
    ng-class="{
      'has-error':
        client_details_form.email.$invalid &&
        (client_details_form.email.$dirty || client_details_form.submitted)
    }">
    <label
      class="control-label col-sm-4"
      for="email"
      translate="PUBLIC_BOOKING.CLIENT_FORM.EMAIL_LBL">
    </label>
    <div class="col-sm-5">
      <input
        type="email"
        name="email"
        id="email"
        ng-model="client.email"
        class="form-control"
        ng-pattern="validator.getEmailPattern()"
        autocomplete="email"
        required />
    </div>
    <div class="col-sm-3">
      <div ng-messages="client_details_form.email.$error" role="alert">
        <div ng-show="client_details_form.email.$dirty || client_details_form.submitted">
          <div ng-message="required" class="error-message">
            <span
              class="error-message__item"
              translate="PUBLIC_BOOKING.CLIENT_FORM.EMAIL_REQUIRED">
            </span>
          </div>
          <div ng-message="pattern" class="error-message">
            <span
              class="error-message__item"
              translate="PUBLIC_BOOKING.CLIENT_FORM.EMAIL_INVALID">
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div
    class="form-group"
    ng-class="{
      'has-error':
        client_details_form.mobile.$invalid &&
        (client_details_form.mobile.$dirty || client_details_form.submitted)
    }">
    <label
      class="control-label col-sm-4"
      for="mobile"
      translate="PUBLIC_BOOKING.CLIENT_FORM.MOBILE_LBL">
    </label>
    <div class="col-sm-5">
      <input
        type="text"
        name="mobile"
        id="mobile"
        ng-model="client.mobile"
        class="form-control"
        ng-pattern="validator.getMobilePattern()"
        autocomplete="tel"
        bb-local-number
      />
    </div>
    <div class="col-sm-3">
      <div ng-messages="client_details_form.mobile.$error" role="alert">
        <div ng-show="client_details_form.mobile.$dirty || client_details_form.submitted">
          <div ng-message="pattern" class="error-message">
            <span
              class="error-message__item"
              translate="PUBLIC_BOOKING.CLIENT_FORM.MOBILE_INVALID">
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div
    class="form-group"
    ng-class="{
      'has-error':
        client_details_form.address1.$invalid &&
        (client_details_form.address1.$dirty || client_details_form.submitted)
    }">
    <label
      for="address1"
      class="control-label col-sm-4"
      translate="PUBLIC_BOOKING.CLIENT_FORM.ADDRESS_LBL">
    </label>
    <div class="col-sm-5">
      <input
        type="text"
        name="address1"
        id="address1"
        ng-model="client.address1"
        class="form-control"
        autocomplete="address-line1"
      />
    </div>
    <div class="col-sm-3">
      <div ng-messages="client_details_form.address1.$error" role="alert">
        <div ng-show="client_details_form.address1.$dirty || client_details_form.submitted">
          <div ng-message="required" class="error-message">
            <span
              class="error-message__item"
              translate="PUBLIC_BOOKING.CLIENT_FORM.ADDRESS_REQUIRED">
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="form-group">
    <label
      for="address2"
      class="control-label col-sm-4">
    </label>
    <div class="col-sm-5">
      <input
        type="text"
        name="address2"
        id="address2"
        ng-model="client.address2"
        class="form-control"
        autocomplete="address-line2"
      />
    </div>
  </div>

  <div class="form-group">
    <label
      for="address3"
      class="control-label col-sm-4"
      translate="PUBLIC_BOOKING.CLIENT_FORM.ADDRESS_3_LBL">
    </label>
    <div class="col-sm-5">
      <input
        type="text"
        name="address3"
        id="address3"
        ng-model="client.address3"
        class="form-control"
        autocomplete="address-level1"
      />
    </div>
  </div>

  <div class="form-group">
    <label
      for="address4"
      class="control-label col-sm-4"
      translate="PUBLIC_BOOKING.CLIENT_FORM.ADDRESS_4_LBL">
    </label>
    <div class="col-sm-5">
      <input
        type="text"
        name="address4"
        id="address4"
        ng-model="client.address4"
        class="form-control"
        autocomplete="address-level2"
      />
    </div>
  </div>

  <div
    class="form-group"
    ng-class="{
      'has-error':
        client_details_form.postcode.$invalid &&
        (client_details_form.postcode.$dirty || booking_form.submitted)
    }">
    <label
      for="postcode"
      class="control-label col-sm-4"
      translate="PUBLIC_BOOKING.CLIENT_FORM.POSTCODE_LBL">
    </label>
    <div class="col-sm-5">
      <input
        type="text"
        name="postcode"
        id="postcode"
        ng-model="client.postcode"
        class="form-control"
        style="text-transform:uppercase"
        autocomplete="postal-code"
      />
    </div>
    <div class="col-sm-3">
      <div ng-messages="client_details_form.postcode.$error" role="alert">
        <div ng-show="client_details_form.postcode.$dirty || client_details_form.submitted">
          <div ng-message="required" class="error-message">
            <span
              class="error-message__item"
              translate="PUBLIC_BOOKING.CLIENT_FORM.POSTCODE_INVALID">
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div
    class="bb-section"
    ng-if="client_details.questions && client_details.questions.length > 0">

    <h2
      class="booking-form-header"
      translate="PUBLIC_BOOKING.CLIENT_FORM.CLIENT_QUESTIONS_HEADING">
    </h2>

    <div
      class="form-group"
      ng-repeat="question in client_details.questions"
      bb-question-line
      ng-show="question.currentlyShown"
      ng-class="{
        'has-error':
          client_details_form['q' + question.id].$invalid &&
          (client_details_form['q' + question.id].$dirty || client_details_form.submitted),
        'bb-check-space': (question.detail_type === 'check') || (question.detail_type === 'check-price'),
        'bb-not-check': (question.detail_type !== 'check') && (question.detail_type !== 'check-price')
      }">
      <label
        class="control-label col-sm-4"
        bb-question-label="question"
        for="{{::question.id}}">
        {{::question.name}}
      </label>

      <div class="col-sm-5">
        <input
          bb-question="question"
          class="form-control"
        />
        <small class="bb-help-text" ng-show="question.help_text">
          {{::question.help_text}}
        </small>
      </div>

      <div class="col-sm-3">
        <div ng-messages="client_details_form['q' + question.id].$error" role="alert">
          <div ng-show="client_details_form['q' + question.id].$dirty || client_details_form.submitted">
            <div ng-message="required" class="error-message">
              <span
                class="error-message__item"
                translate="PUBLIC_BOOKING.CLIENT.FIELD_REQUIRED">
              </span>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <div
    class="form-group"
    ng-class="{
      'has-error':
        client_details_form.password.$invalid &&
        (client_details_form.password.$dirty || client_details_form.submitted)
    }"
    ng-if="bb.company.settings.offer_login">
    <label
      for="password"
      class="control-label col-sm-4"
      translate="PUBLIC_BOOKING.CLIENT_FORM.PASSWORD_LBL">
    </label>
    <div class="col-sm-5">
      <input
        type="password"
        name="password"
        id="password"
        required
        ng-model="client.password"
        class="form-control"
        ng-minlength="7"
        autocomplete="off"
      />
    </div>
    <div class="col-sm-3">
      <div ng-messages="client_details_form.password.$error" role="alert">
        <div ng-show="client_details_form.password.$dirty || client_details_form.submitted">
          <div ng-message="required" class="error-message">
            <span
              class="error-message__item"
              translate="PUBLIC_BOOKING.CLIENT_FORM.PASSWORD_REQUIRED">
            </span>
          </div>
          <div ng-message="minlength" class="error-message">
            <span
              class="error-message__item"
              translate="PUBLIC_BOOKING.CLIENT_FORM.PASSWORD_LENGTH">
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div
    class="form-group"
    ng-class="{
      'has-error':
        client_details_form.confirm_password.$invalid &&
        (client_details_form.confirm_password.$dirty || client_details_form.submitted)
    }"
    ng-if="bb.company.settings.offer_login">
    <label
      for="confirm_password"
      class="control-label col-sm-4"
      translate="PUBLIC_BOOKING.CLIENT_FORM.CONFIRM_PASSWORD_LBL">
    </label>
    <div class="col-sm-5">
      <input
        type="password"
        name="confirm_password"
        id="confirm_password"
        required
        ng-model="confirm_password"
        class="form-control"
        autocomplete="off"
        bb-match-input="client.password"
      />
    </div>
    <div class="col-sm-3">
      <div ng-messages="client_details_form.confirm_password.$error" role="alert">
        <div ng-show="client_details_form.confirm_password.$dirty || client_details_form.submitted">
          <div ng-message="required" class="error-message">
            <span
              class="error-message__item"
              translate="PUBLIC_BOOKING.CLIENT_FORM.PASSWORD_REQUIRED">
            </span>
          </div>
          <div ng-message="match" class="error-message">
            <span
              class="error-message__item"
              translate="PUBLIC_BOOKING.CLIENT_FORM.PASSWORD_MISMATCH">
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>
